(()=>{var e={};e.id=332,e.ids=[220,332,636],e.modules={671:(e,t)=>{"use strict";Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,s){return s in t?t[s]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,s)):"function"==typeof t&&"default"===s?t:void 0}}})},958:(e,t,s)=>{"use strict";s.r(t),s.d(t,{config:()=>f,default:()=>p,getServerSideProps:()=>j,getStaticPaths:()=>g,getStaticProps:()=>h,reportWebVitals:()=>y,routeModule:()=>A,unstable_getServerProps:()=>P,unstable_getServerSideProps:()=>S,unstable_getStaticParams:()=>w,unstable_getStaticPaths:()=>N,unstable_getStaticProps:()=>v});var a={};s.r(a),s.d(a,{default:()=>b,getStaticProps:()=>x});var r=s(865),n=s(455),l=s(671),i=s(781),c=s.n(i),o=s(327),d=s(732),u=s(15);let m=(0,require("@supabase/supabase-js").createClient)("https://cvuxajqjvuulvgityqdg.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN2dXhhanFqdnV1bHZnaXR5cWRnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzczNjYzOTUsImV4cCI6MjA1Mjk0MjM5NX0.BNZ12THDXPyLmbDjcGBtbcDkJPxCOFlBiM1p7lZQ9FM");async function x(){let{data:e}=await m.from("posts").select("*").order("created_at",{ascending:!1});return{props:{posts:e}}}function b({posts:e}){let[t,s]=(0,u.useState)(e.map(e=>({id:e.id,count:e.likes||0}))),[a,r]=(0,u.useState)(!1),[n,l]=(0,u.useState)({username:"",recipient:"",title:"",content:""}),[i,c]=(0,u.useState)([]),[o,x]=(0,u.useState)(null),[b,p]=(0,u.useState)(!1),[h,g]=(0,u.useState)(""),j=async e=>{let a=t.map(t=>t.id===e?{...t,count:t.count+1}:t);s(a),await m.from("posts").update({likes:a.find(t=>t.id===e).count}).eq("id",e)},f=async e=>{e.preventDefault(),await m.from("posts").insert([n]),r(!1),window.location.reload()},y=async e=>{x(e);let{data:t}=await m.from("comments").select("*").eq("post_id",e);c(t||[]),p(!0)},v=async()=>{if(h.trim()){let e=n.username.trim()||"Anonymous",t={post_id:o,content:h.trim(),username:e};await m.from("comments").insert([t]),c([...i,t]),g(""),l({...n,username:""})}};return(0,d.jsxs)("div",{className:"min-h-screen bg-gray-100 py-8",children:[(0,d.jsxs)("div",{className:"max-w-4xl mx-auto p-4 bg-white shadow rounded",children:[(0,d.jsxs)("header",{className:"flex justify-between items-center mb-8",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Keluh Kesah"}),(0,d.jsx)("button",{onClick:()=>r(!0),className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Tambah Keluhan"})]}),(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map(e=>(0,d.jsxs)("div",{className:"bg-yellow-200 p-4 rounded shadow hover:shadow-lg transition",style:{transform:"rotate(-1deg)"},children:[(0,d.jsx)("div",{className:"mb-2",children:(0,d.jsxs)("span",{className:"text-sm text-gray-700",children:["Dari: ",e.username||"Anonim"]})}),(0,d.jsx)("div",{className:"mb-2",children:(0,d.jsxs)("span",{className:"text-sm text-gray-700",children:["Untuk: ",e.recipient||"Semua"]})}),(0,d.jsx)("h2",{className:"text-lg font-medium text-gray-800 mb-2",children:e.title}),(0,d.jsx)("p",{className:"text-gray-700",children:e.content}),(0,d.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,d.jsxs)("button",{onClick:()=>j(e.id),className:"flex items-center text-gray-500 hover:text-gray-700",children:[(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,d.jsx)("path",{d:"M3.172 10H7V2a1 1 0 012 0v8h4.828a2 2 0 011.414 3.414l-5.243 5.242a1 1 0 01-1.414 0l-5.242-5.242A2 2 0 013.172 10z"})}),t.find(t=>t.id===e.id)?.count||0]}),(0,d.jsx)("button",{onClick:()=>y(e.id),className:"text-blue-500 hover:underline",children:"Comments"})]})]},e.id))})]}),a&&(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-10",children:(0,d.jsxs)("div",{className:"bg-white p-6 rounded shadow-md w-full max-w-md",children:[(0,d.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Tambah Keluhan"}),(0,d.jsxs)("form",{onSubmit:f,children:[(0,d.jsxs)("label",{className:"block mb-2",children:["Dari (opsional):",(0,d.jsx)("input",{type:"text",className:"w-full border rounded p-2",value:n.username,onChange:e=>l({...n,username:e.target.value})})]}),(0,d.jsxs)("label",{className:"block mb-2",children:["Untuk:",(0,d.jsx)("input",{type:"text",className:"w-full border rounded p-2",value:n.recipient,onChange:e=>l({...n,recipient:e.target.value})})]}),(0,d.jsxs)("label",{className:"block mb-2",children:["Judul:",(0,d.jsx)("input",{type:"text",className:"w-full border rounded p-2",value:n.title,onChange:e=>l({...n,title:e.target.value}),required:!0})]}),(0,d.jsxs)("label",{className:"block mb-4",children:["Isi Keluhan:",(0,d.jsx)("textarea",{className:"w-full border rounded p-2",rows:"4",value:n.content,onChange:e=>l({...n,content:e.target.value}),required:!0})]}),(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("button",{type:"button",className:"bg-gray-300 text-gray-700 px-4 py-2 rounded",onClick:()=>r(!1),children:"Batal"}),(0,d.jsx)("button",{type:"submit",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Tambahkan"})]})]})]})}),b&&(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-10",children:(0,d.jsxs)("div",{className:"bg-white p-6 rounded shadow-md w-full max-w-md",children:[(0,d.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Comments"}),(0,d.jsx)("div",{className:"mb-4 max-h-64 overflow-y-auto",children:i.length>0?i.map((e,t)=>(0,d.jsxs)("div",{className:"border-b border-gray-200 py-2 text-gray-700",children:[(0,d.jsxs)("span",{className:"text-sm text-gray-600",children:["From: ",e.username||"Anonymous"]}),(0,d.jsx)("p",{children:e.content})]},t)):(0,d.jsx)("p",{className:"text-gray-500",children:"No comments yet."})}),(0,d.jsxs)("label",{className:"block mb-2",children:["Your Name (optional):",(0,d.jsx)("input",{type:"text",className:"w-full border rounded p-2",value:n.username,onChange:e=>l({...n,username:e.target.value}),placeholder:"Enter your name or leave blank for Anonymous"})]}),(0,d.jsxs)("label",{className:"block mb-2",children:["Add a Comment:",(0,d.jsx)("textarea",{className:"w-full border rounded p-2",rows:"3",value:h,onChange:e=>g(e.target.value),placeholder:"Write your comment..."})]}),(0,d.jsxs)("div",{className:"flex justify-between",children:[(0,d.jsx)("button",{type:"button",className:"bg-gray-300 text-gray-700 px-4 py-2 rounded",onClick:()=>p(!1),children:"Close"}),(0,d.jsx)("button",{type:"button",className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",onClick:v,children:"Add Comment"})]})]})})]})}let p=(0,l.M)(a,"default"),h=(0,l.M)(a,"getStaticProps"),g=(0,l.M)(a,"getStaticPaths"),j=(0,l.M)(a,"getServerSideProps"),f=(0,l.M)(a,"config"),y=(0,l.M)(a,"reportWebVitals"),v=(0,l.M)(a,"unstable_getStaticProps"),N=(0,l.M)(a,"unstable_getStaticPaths"),w=(0,l.M)(a,"unstable_getStaticParams"),P=(0,l.M)(a,"unstable_getServerProps"),S=(0,l.M)(a,"unstable_getServerSideProps"),A=new r.PagesRouteModule({definition:{kind:n.A.PAGES,page:"/index",pathname:"/",bundlePath:"",filename:""},components:{App:o.default,Document:c()},userland:a})},327:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var a=s(732);s(880);let r=function({Component:e,pageProps:t}){return(0,a.jsx)(e,{...t})}},880:()=>{},455:(e,t)=>{"use strict";Object.defineProperty(t,"A",{enumerable:!0,get:function(){return s}});var s=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},361:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},15:e=>{"use strict";e.exports=require("react")},732:e=>{"use strict";e.exports=require("react/jsx-runtime")},873:e=>{"use strict";e.exports=require("path")}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[781],()=>s(958));module.exports=a})();